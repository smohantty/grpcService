syntax = "proto3";

package rayvisiongrpc;

enum CameraType {
    HEAD = 0;
    BODY = 1;
    IR = 2;
}

enum ColorSpace
{
    RGB = 0;
    GRAY = 1;
}

message ImageData {
    int32 width = 1;
    int32 height = 2;
    ColorSpace colorspace = 3;
    bytes buffer = 4;
}

message GetImageRequest {
  CameraType type = 1;
}

message Empty {
}

message SegmentData {
  int32 left = 1;
  int32 top = 2;
  int32 right = 3;
  int32 bottom = 4;
  ImageData image = 5;
}

// Segmentation result message
message SegmentationResult {
    repeated SegmentData segments = 1;
}


service RayVisionGrpc {
  rpc GetImage(GetImageRequest) returns (ImageData);

  rpc doSegmentation(Empty) returns (stream SegmentationResult);

}